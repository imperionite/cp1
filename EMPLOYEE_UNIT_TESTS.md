# cp1

## EmployeeTest Documentation

| Test Method                     | Description                                                                                             | Assertions                                                                                                                                                                                                                                                                                                                                             |
| ------------------------------- | ------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `testEmployeeConstructorAndGetters` | Verifies the constructor that initializes all Employee fields and the getters for basic employee attributes. | `assertEquals` to check all the specific fields of the employee object are successfully created during instantiation, it also check if the user is not null.                                                                                                                                                                                           |
| `testEmployeeSetters`               | Tests the setter methods for all Employee fields.                                                            | `assertEquals` verifying the updated values set by`testToString`                | Tests the `toString()` method to ensure it returns the expected string representation of the Employee. | `assertEquals` comparing the returned string from `toString()` with a predefined expected string.                                                                                                                                                                                                                                                           |
| `testEquals`                | Tests the `equals()` method to ensure it correctly identifies equal and unequal Employee objects based on their IDs. | `assertEquals` to verify that two Employee objects with the same ID are considered equal, `assertNotEquals` to verify that two Employee objects with different IDs are considered unequal.                                                                                                                                                                   |



![Employee Test](https://drive.google.com/uc?id=1AT4Cxjz1QoHTEiGyRVOI36IxFqkpj9Nm)

---

## EmployeeServiceTest Documentation

| Test Method                          | Description                                                                                                                                                                       | Mocked Interactions                                                                                                                                                                                                          | Assertions                                                                                                                                                                                                                                                              |
| ------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `testCreateEmployee_Success`         | Tests the `createEmployee()` method for successful creation.                                                                                                                        | `when(userRepository.findById(1L)).thenReturn(Optional.of(user))`, `when(employeeRepository.save(employee)).thenReturn(employee)`                                                                                                 | `assertEquals` to verify that the returned Employee is the same as the input, `verify` to check that `employeeRepository.save()` was called once.                                                                                                                      |
| `testCreateEmployee_UserNotFound`    | Tests the `createEmployee()` method when the associated user is not found.                                                                                                            | `when(userRepository.findById(1L)).thenReturn(Optional.empty())`                                                                                                                                                               | `assertThrows` to ensure `EntityNotFoundException` is thrown, `verify` to check that `employeeRepository.save()` was never called.                                                                                                                                         |
| `testGetAllEmployees`                | Tests the `getAllEmployees()` method to verify that it returns a list of all employees.                                                                                             | `when(employeeRepository.findAll()).thenReturn(employees)`                                                                                                                                                                  | `assertEquals` to check the size of the returned list, `verify` to check that `employeeRepository.findAll()` was called once.                                                                                                                                             |
| `testGetEmployeeById_Found`          | Tests the `getEmployeeById()` method when an employee with the given ID is found.                                                                                                     | `when(employeeRepository.findById(1L)).thenReturn(Optional.of(employee))`                                                                                                                                                         | `assertTrue` to check if an Optional is present, `assertEquals` to verify the ID, `verify` to check that `employeeRepository.findById(1L)` was called once.                                                                                                                 |
| `testGetEmployeeById_NotFound`       | Tests the `getEmployeeById()` method when no employee with the given ID is found.                                                                                                  | `when(employeeRepository.findById(1L)).thenReturn(Optional.empty())`                                                                                                                                                        | `assertFalse` to check if the Optional is empty, `verify` to check that `employeeRepository.findById(1L)` was called once.                                                                                                                                            |
| `testFindByUser_Found`               | Tests the `findByUser()` method when an employee associated with the given user is found.                                                                                            | `when(employeeRepository.findByUser(user)).thenReturn(Optional.of(employee))`                                                                                                                                                    | `assertTrue` to check if an Optional is present, `assertEquals` to verify the employee, `verify` to check that `employeeRepository.findByUser(user)` was called once.                                                                                                       |
| `testFindByUser_NotFound`            | Tests the `findByUser()` method when no employee associated with the given user is found.                                                                                            | `when(employeeRepository.findByUser(user)).thenReturn(Optional.empty())`                                                                                                                                                   | `assertFalse` to check if the Optional is empty, `verify` to check that `employeeRepository.findByUser(user)` was called once.                                                                                                                                       |
| `testGetEmployeeByEmployeeNumber_Found`| Tests the `getEmployeeByEmployeeNumber()` method when an employee with a given employeeNumber is found | `when(employeeRepository.findByEmployeeNumber(employeeNumber)).thenReturn(Optional.of(employee))` | `assertTrue` to verify if the optional is present, assertEquals to verify employeeNumber, and verify the method of the repository is called once. |
| `testGetEmployeeByEmployeeNumber_NotFound`| Tests the `getEmployeeByEmployeeNumber()` method when an employee with a given employee number is not found | `when(employeeRepository.findByEmployeeNumber(employeeNumber)).thenReturn(Optional.empty())` | `assertFalse` if the employee is not found, verify that repository method is called once |


![Employee Service Test](https://drive.google.com/uc?id=10RAK8qDhwKs1q2JwP_d_xBJ0s7eWq-Dd)

---

## EmployeeControllerTest Documentation

| Test Method                              | Description                                                                                                                                      | Mocked Interactions                                                                                                                                                                                                                                                                                                                                                                     | Assertions                                                                                                                                                                       |
| ---------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `testCreateEmployee_Admin_Success`       | Tests `createEmployee()` for admin users; verifies successful creation and CREATED status.                                                         | `when(userDetails.getUsername()).thenReturn("admin")`, `when(userService.findByUsername("admin")).thenReturn(Optional.of(adminUser))`, `when(employeeService.createEmployee(employee)).thenReturn(employee)`                                                                                                                                                                       | `assertEquals` to verify the HTTP status code (CREATED).                                                                                                                          |
| `testCreateEmployee_NotAdmin`            | Tests `createEmployee()` for non-admin users; verifies FORBIDDEN status.                                                                           | `when(userDetails.getUsername()).thenReturn("user")`, `when(userService.findByUsername("user")).thenReturn(Optional.of(normalUser))`                                                                                                                                                                                                                                          | `assertEquals` to verify the HTTP status code (FORBIDDEN).                                                                                                                        |
| `testGetAllEmployees_Admin`              | Tests `getAllEmployees()` for admin users; verifies successful retrieval and OK status.                                                             | `when(userDetails.getUsername()).thenReturn("admin")`, `when(userService.findByUsername("admin")).thenReturn(Optional.of(adminUser))`, `when(employeeService.getAllEmployees()).thenReturn(employees)`                                                                                                                                                                           | `assertEquals` to verify the HTTP status code (OK) and the size of the returned employee list.                                                                                      |
| `testGetEmployeeById_Admin_Found`         | Tests `getEmployeeById()` for admin users when the employee is found; verifies OK status.                                                          | `when(userDetails.getUsername()).thenReturn("admin")`, `when(userService.findByUsername("admin")).thenReturn(Optional.of(adminUser))`, `when(employeeService.getEmployeeById(1L)).thenReturn(Optional.of(employee))`                                                                                                                                                                | `assertEquals` to verify the HTTP status code (OK).                                                                                                                             |
| `testGetEmployeeById_Admin_NotFound`      | Tests `getEmployeeById()` for admin users when the employee is not found; verifies NOT_FOUND status.                                              | `when(userDetails.getUsername()).thenReturn("admin")`, `when(userService.findByUsername("admin")).thenReturn(Optional.of(adminUser))`, `when(employeeService.getEmployeeById(1L)).thenReturn(Optional.empty())`                                                                                                                                                            | `assertEquals` to verify the HTTP status code (NOT_FOUND).                                                                                                                       |
| `testGetAllEmployeesForAdmin_Admin`     | Tests `getAllEmployeesForAdmin()` for admin users; verifies successful retrieval and OK status with correct DTO conversion. | `when(userDetails.getUsername()).thenReturn("admin")`, `when(userService.findByUsername("admin")).thenReturn(Optional.of(adminUser))`, `when(employeeService.getAllEmployees()).thenReturn(employees)`                                                                                                                                                          | `assertEquals` to verify the HTTP status code (OK) and the correct employee details in the response DTO.                                                                          |
| `testGetEmployeeByEmployeeNumber_Admin_Found` | Tests `getEmployeeByEmployeeNumber()` when an admin found the employee with the right employee number | `when(userDetails.getUsername()).thenReturn("admin")`, `when(userService.findByUsername("admin")).thenReturn(Optional.of(adminUser))`, `when(employeeService.getEmployeeByEmployeeNumber("EMP001")).thenReturn(Optional.of(employee))` | Verify OK status

![Employee Controller Test](https://drive.google.com/uc?id=1Snh4NnA8wjEnAIbttO1a66c0qVlz0pS7)